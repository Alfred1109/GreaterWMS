# GreaterWMS 系统用例设计文档

## 1. 用例概述

### 1.1 用例图
```
GreaterWMS系统用例图

参与者:
├── 系统管理员
├── 仓库管理员  
├── 入库操作员
├── 出库操作员
├── 库存管理员
└── 普通员工

主要用例:
├── 用户管理
├── 商品管理
├── 入库管理
├── 出库管理
├── 库存管理
├── 盘点管理
├── 报表分析
└── 系统配置
```

### 1.2 用例分类

#### 1.2.1 核心业务用例
- UC001: 商品入库流程
- UC002: 商品出库流程  
- UC003: 库存盘点流程
- UC004: 库存调整流程

#### 1.2.2 基础管理用例
- UC005: 用户登录注册
- UC006: 商品信息管理
- UC007: 客户供应商管理
- UC008: 仓库基础设置

#### 1.2.3 分析报表用例
- UC009: 库存查询统计
- UC010: 进出库报表
- UC011: 盘点分析报告
- UC012: 绩效指标分析

## 2. 详细用例设计

### UC001: 商品入库流程

#### 2.1.1 用例基本信息
- **用例编号**: UC001
- **用例名称**: 商品入库流程
- **主要参与者**: 入库操作员
- **次要参与者**: 仓库管理员、供应商
- **用例类型**: 核心业务用例
- **复杂度**: 高

#### 2.1.2 用例描述
入库操作员接收供应商发货后，通过系统完成商品入库的完整流程，包括ASN创建、收货确认、质检、上架等操作。

#### 2.1.3 前置条件
- 用户已登录系统
- 用户具有入库操作权限
- 供应商信息已在系统中维护
- 商品信息已在系统中维护

#### 2.1.4 后置条件
- 商品成功入库
- 库存数量正确更新
- 入库记录完整保存
- 相关人员收到入库通知

#### 2.1.5 主要流程
1. **创建ASN(预期入库通知)**
   - 操作员登录系统
   - 选择"入库管理"→"创建ASN"
   - 填写ASN基本信息（供应商、预计到货时间等）
   - 添加入库商品明细（商品代码、数量、单价等）
   - 保存ASN，系统自动生成ASN编号
   - 打印ASN单据

2. **商品收货确认**
   - 货物到达后，扫描ASN条码
   - 系统显示ASN详细信息
   - 逐项扫描商品条码进行收货确认
   - 输入实际收货数量
   - 记录商品状态（正常/损坏/短缺）
   - 拍照记录异常商品
   - 完成收货确认

3. **质检处理**
   - 对收货商品进行质量检查
   - 扫描商品条码更新质检状态
   - 合格商品标记为"待上架"
   - 不合格商品标记为"质检不合格"
   - 记录质检意见和处理方式

4. **商品上架**
   - 系统推荐最优货位
   - 操作员可手动选择货位
   - 扫描商品条码和货位条码
   - 确认上架数量
   - 系统更新库存和货位占用状态
   - 生成上架完成记录

#### 2.1.6 异常流程
- **A1: 商品信息不存在**
  - 系统提示商品未维护
  - 操作员联系管理员添加商品
  - 或临时创建商品信息

- **A2: 实际收货与ASN不符**
  - 记录差异原因（短缺/溢出/损坏）
  - 拍照记录现场情况
  - 通知供应商和仓库管理员
  - 按实际情况调整入库数量

- **A3: 质检不合格**
  - 不合格商品隔离存放
  - 通知供应商处理方案
  - 记录处理结果（退货/返工/报废）

#### 2.1.7 业务规则
- ASN必须包含完整的商品信息
- 收货数量不能超过ASN数量的110%
- 所有入库商品必须经过质检
- 货位容量不能超过设定上限

#### 2.1.8 用例场景
**场景1: 正常入库流程**
```
操作员小王收到供应商A的货物：
1. 小王扫描ASN条码: ASN202401001
2. 系统显示: 供应商A，商品3种，总数量100件
3. 小王逐一扫描商品确认收货
4. 实际收货100件，与ASN一致
5. 质检员检查合格
6. 系统推荐货位A01-01-01
7. 小王扫描货位条码完成上架
8. 库存自动更新，入库流程完成
```

### UC002: 商品出库流程

#### 2.2.1 用例基本信息
- **用例编号**: UC002
- **用例名称**: 商品出库流程
- **主要参与者**: 出库操作员
- **次要参与者**: 仓库管理员、客户
- **用例类型**: 核心业务用例
- **复杂度**: 高

#### 2.2.2 用例描述
出库操作员根据客户订单需求，通过系统完成商品出库的完整流程，包括订单处理、拣货、复核、包装、发货等操作。

#### 2.2.3 前置条件
- 用户已登录系统
- 用户具有出库操作权限
- 客户信息已在系统中维护
- 商品有足够的可用库存

#### 2.2.4 后置条件
- 商品成功出库
- 库存数量正确更新
- 出库记录完整保存
- 客户收到发货通知

#### 2.2.5 主要流程
1. **订单创建与审核**
   - 接收客户订单（手动录入/系统导入）
   - 填写订单基本信息（客户、收货地址、联系方式）
   - 添加订单商品明细（商品代码、数量、价格）
   - 系统检查库存可用性
   - 订单审核通过后生成DN单号

2. **拣货任务生成**
   - 系统根据订单生成拣货任务
   - 优化拣货路径，减少行走距离
   - 分配拣货人员
   - 打印拣货清单

3. **拣货作业**
   - 拣货员按路径进行拣货
   - 扫描货位条码确认位置
   - 扫描商品条码确认商品
   - 输入拣货数量
   - 将商品放入拣货容器
   - 系统实时更新拣货进度

4. **复核与包装**
   - 复核员扫描订单条码
   - 逐一扫描商品进行复核
   - 确认商品种类和数量正确
   - 选择合适包装材料
   - 完成商品包装
   - 打印发货标签

5. **发货出库**
   - 扫描包裹条码
   - 选择物流方式
   - 录入运单号信息
   - 确认发货完成
   - 系统更新库存和订单状态
   - 发送发货通知给客户

#### 2.2.6 异常流程
- **A1: 库存不足**
  - 系统提示库存不足
  - 联系客户确认是否部分发货
  - 生成缺货订单处理后续补货

- **A2: 拣货商品错误**
  - 系统提示商品不匹配
  - 拣货员重新确认商品信息
  - 退回错误商品到原货位

- **A3: 复核发现错误**
  - 记录错误类型和原因
  - 退回错误商品重新拣货
  - 通知拣货员注意事项

#### 2.2.7 业务规则
- 订单必须经过库存可用性检查
- 拣货必须按照系统规划路径执行
- 所有出库商品必须经过复核
- 发货后不能随意取消订单

#### 2.2.8 用例场景
**场景1: 电商订单出库**
```
客户张三下单购买：
1. 客服录入订单: DN202401001
2. 系统生成拣货任务，分配给拣货员李四
3. 李四按优化路径拣货：A01-01-01货位拣取商品X 2件
4. 扫码确认，系统显示拣货完成
5. 复核员王五复核无误
6. 包装员打包，贴上快递标签
7. 快递员取件，录入运单号
8. 系统发送发货短信给张三
```

### UC003: 库存盘点流程

#### 2.3.1 用例基本信息
- **用例编号**: UC003
- **用例名称**: 库存盘点流程
- **主要参与者**: 库存管理员
- **次要参与者**: 盘点员工、仓库管理员
- **用例类型**: 核心业务用例
- **复杂度**: 中

#### 2.3.2 用例描述
库存管理员定期组织库存盘点，通过系统完成盘点计划制定、盘点执行、差异分析、库存调整的完整流程。

#### 2.3.3 前置条件
- 用户已登录系统
- 用户具有盘点操作权限
- 盘点区域暂停出入库作业
- 盘点人员已安排到位

#### 2.3.4 后置条件
- 盘点任务全部完成
- 盘点差异已分析处理
- 库存数据已调整正确
- 生成盘点分析报告

#### 2.3.5 主要流程
1. **制定盘点计划**
   - 选择盘点类型（全盘/抽盘/循环盘点）
   - 确定盘点范围（仓库/区域/货位）
   - 设定盘点时间和人员安排
   - 生成盘点任务清单
   - 冻结盘点区域库存

2. **执行盘点作业**
   - 盘点员获取盘点任务
   - 按区域逐一进行盘点
   - 扫描货位条码进入盘点
   - 扫描商品条码确认商品
   - 输入实际盘点数量
   - 记录商品状态和备注
   - 完成单个货位盘点

3. **盘点数据汇总**
   - 系统自动汇总盘点结果
   - 计算账面数量与实盘数量差异
   - 标识盈亏商品和数量
   - 生成初步盘点报表
   - 盘点员确认盘点完成

4. **差异分析处理**
   - 分析盘点差异原因
   - 区分正常差异和异常差异
   - 对重要差异进行复盘确认
   - 记录差异处理意见
   - 制定库存调整方案

5. **库存调整确认**
   - 审核库存调整方案
   - 执行库存数量调整
   - 更新系统库存数据
   - 生成库存调整凭证
   - 解冻盘点区域库存

#### 2.3.6 异常流程
- **A1: 盘点差异过大**
  - 暂停库存调整
  - 组织人员重新复盘
  - 分析差异根本原因
  - 制定改进措施

- **A2: 商品条码无法识别**
  - 手工输入商品信息
  - 联系IT维护条码
  - 临时使用备用识别方式

#### 2.3.7 用例场景
**场景1: 月度全盘盘点**
```
仓库管理员制定月度盘点计划：
1. 设定盘点时间: 2024年1月31日晚6点
2. 盘点范围: A区全部货位
3. 安排3名盘点员，每人负责10个货位
4. 冻结A区库存，停止出入库
5. 盘点员扫码逐一盘点，发现3处差异
6. 管理员分析差异原因，确认调整方案
7. 系统执行库存调整，生成盘点报告
```

### UC004: 库存调整流程

#### 2.4.1 用例基本信息
- **用例编号**: UC004
- **用例名称**: 库存调整流程
- **主要参与者**: 库存管理员
- **次要参与者**: 仓库管理员
- **用例类型**: 核心业务用例
- **复杂度**: 中

#### 2.4.2 用例描述
当发现库存数据与实际不符时，库存管理员通过系统进行库存调整，确保账实相符。

#### 2.4.3 前置条件
- 用户已登录系统
- 用户具有库存调整权限
- 已确认需要调整的库存差异
- 调整原因清楚明确

#### 2.4.4 后置条件
- 库存数据调整完成
- 调整记录完整保存
- 相关人员收到调整通知
- 库存报表数据更新

#### 2.4.5 主要流程
1. **发起调整申请**
   - 选择需要调整的商品
   - 填写调整原因和说明
   - 输入调整前后数量
   - 上传相关证明文件
   - 提交调整申请

2. **调整审核**
   - 仓库管理员审核调整申请
   - 验证调整原因合理性
   - 确认调整数量准确性
   - 审核通过/驳回申请

3. **执行调整**
   - 系统执行库存调整
   - 更新商品库存数量
   - 更新货位库存信息
   - 生成调整凭证
   - 记录调整操作日志

#### 2.4.6 用例场景
**场景1: 商品损坏调整**
```
发现货位A01-01-01的商品X损坏5件：
1. 库存管理员发起调整申请
2. 调整原因: 商品包装破损无法销售
3. 调整数量: 从100件调整为95件
4. 上传商品损坏照片
5. 仓库管理员审核通过
6. 系统执行调整，库存减少5件
```

### UC005: 用户登录注册

#### 2.5.1 用例基本信息
- **用例编号**: UC005
- **用例名称**: 用户登录注册
- **主要参与者**: 系统用户
- **次要参与者**: 系统管理员
- **用例类型**: 基础管理用例
- **复杂度**: 低

#### 2.5.2 用例描述
新用户通过注册获得系统账号，已有用户通过登录访问系统功能。

#### 2.5.3 主要流程
**用户注册流程:**
1. 用户访问注册页面
2. 填写注册信息（用户名、手机号、邮箱、密码）
3. 接收验证码并输入
4. 同意用户协议
5. 提交注册申请
6. 系统创建账号并发送确认邮件

**用户登录流程:**
1. 用户访问登录页面
2. 输入用户名和密码
3. 可选择记住登录状态
4. 系统验证用户身份
5. 登录成功进入系统首页
6. 记录登录日志

#### 2.5.4 异常流程
- **A1: 用户名已存在**
  - 提示用户名已被注册
  - 建议使用其他用户名

- **A2: 登录密码错误**
  - 提示密码错误
  - 连续错误5次锁定账户

#### 2.5.5 用例场景
**场景1: 新员工注册**
```
新入职员工小李首次使用系统：
1. 小李点击"新用户注册"
2. 填写个人信息和联系方式
3. 收到手机验证码并输入
4. 设置登录密码
5. 注册成功，等待管理员分配权限
```

### UC006: 商品信息管理

#### 2.6.1 用例基本信息
- **用例编号**: UC006
- **用例名称**: 商品信息管理
- **主要参与者**: 商品管理员
- **用例类型**: 基础管理用例
- **复杂度**: 中

#### 2.6.2 用例描述
商品管理员维护商品基础信息，包括创建、修改、删除商品档案。

#### 2.6.3 主要流程
1. **新增商品**
   - 填写商品基本信息
   - 设置商品分类和属性
   - 上传商品图片
   - 生成商品条码
   - 保存商品档案

2. **修改商品**
   - 查找需要修改的商品
   - 更新商品信息
   - 记录修改原因
   - 保存修改内容

3. **商品查询**
   - 支持多条件组合查询
   - 显示查询结果列表
   - 支持导出商品数据

#### 2.6.4 用例场景
**场景1: 新商品入库前准备**
```
供应商提供新商品A001：
1. 商品管理员创建商品档案
2. 录入基本信息: 名称、规格、单位等
3. 设置商品分类: 电子产品>手机>智能手机
4. 上传商品图片
5. 系统生成条码: 1234567890123
6. 设置安全库存: 50件
7. 保存完成，可以用于入库作业
```

## 3. 移动端用例设计

### UC007: 移动端扫码入库

#### 3.1.1 用例基本信息
- **用例编号**: UC007
- **用例名称**: 移动端扫码入库
- **主要参与者**: 入库操作员
- **设备环境**: 手机APP/PDA设备
- **用例类型**: 移动端用例
- **复杂度**: 中

#### 3.1.2 用例描述
操作员使用手机APP或PDA设备扫描条码完成商品入库操作。

#### 3.1.3 主要流程
1. **设备登录**
   - 打开移动端APP
   - 扫描登录二维码或输入账号密码
   - 验证设备权限

2. **扫码收货**
   - 选择"入库收货"功能
   - 扫描ASN条码加载任务
   - 逐一扫描商品条码
   - 确认收货数量
   - 记录商品状态

3. **异常处理**
   - 拍照记录异常商品
   - 语音录入异常说明
   - 提交异常处理申请

#### 3.1.4 用例场景
**场景1: PDA收货作业**
```
操作员使用PDA进行收货：
1. PDA扫描ASN条码，加载收货任务
2. 显示: 供应商A，共10种商品待收货
3. 扫描商品条码，PDA发出"滴"声确认
4. 屏幕显示: 商品A001，应收10件，已收10件
5. 继续扫描下一个商品
6. 全部收货完成，PDA提示"任务完成"
```

### UC008: 移动端库存查询

#### 3.2.1 用例基本信息
- **用例编号**: UC008
- **用例名称**: 移动端库存查询
- **主要参与者**: 仓库员工
- **设备环境**: 手机APP
- **用例类型**: 移动端用例
- **复杂度**: 低

#### 3.2.2 用例描述
员工使用手机APP快速查询商品库存信息。

#### 3.2.3 主要流程
1. **快速查询**
   - 扫描商品条码
   - 系统显示库存信息
   - 显示货位分布情况

2. **详细查询**
   - 输入商品代码或名称
   - 查看库存详细信息
   - 查看库存变动历史

#### 3.2.4 用例场景
**场景1: 客户电话咨询库存**
```
客户电话询问商品A001库存：
1. 员工打开手机APP
2. 扫描商品A001条码
3. 屏幕显示: 库存100件，可用80件
4. 分布在货位: A01-01-01(50件), A01-01-02(50件)
5. 告知客户库存充足，可以下单
```

## 4. 异常用例处理

### UC009: 系统故障恢复

#### 4.1.1 用例基本信息
- **用例编号**: UC009
- **用例名称**: 系统故障恢复
- **主要参与者**: 系统管理员
- **用例类型**: 异常处理用例
- **复杂度**: 高

#### 4.1.2 用例描述
当系统发生故障时，管理员执行应急处理和系统恢复操作。

#### 4.1.3 主要流程
1. **故障检测**
   - 监控系统发现异常
   - 自动发送故障报警
   - 管理员确认故障情况

2. **应急处理**
   - 启动备用系统
   - 切换到离线模式
   - 保护关键数据安全

3. **故障修复**
   - 定位故障根本原因
   - 执行修复操作
   - 验证系统功能正常

4. **数据恢复**
   - 从备份恢复数据
   - 同步离线期间数据
   - 验证数据完整性

### UC010: 网络异常处理

#### 4.2.1 用例基本信息
- **用例编号**: UC010
- **用例名称**: 网络异常处理
- **主要参与者**: 操作员
- **用例类型**: 异常处理用例
- **复杂度**: 中

#### 4.2.2 用例描述
当网络连接异常时，系统提供离线模式支持业务连续性。

#### 4.2.3 主要流程
1. **网络异常检测**
   - 系统自动检测网络状态
   - 提示用户网络异常
   - 自动切换离线模式

2. **离线操作**
   - 缓存关键业务数据
   - 支持基本业务操作
   - 记录离线操作日志

3. **网络恢复**
   - 检测网络连接恢复
   - 同步离线操作数据
   - 切换回在线模式

## 5. 性能用例测试

### UC011: 并发压力测试

#### 5.1.1 测试场景
- **并发用户数**: 1000个用户同时在线
- **操作类型**: 查询库存、录入数据、生成报表
- **测试时长**: 持续2小时
- **成功标准**: 响应时间<3秒，成功率>99%

#### 5.1.2 测试用例
```
压力测试场景：
1. 500个用户同时查询库存
2. 300个用户同时录入入库数据  
3. 200个用户同时生成报表
4. 系统保持稳定运行
5. 数据库连接池正常工作
6. 内存使用率<80%
```

### UC012: 大数据量测试

#### 5.2.1 测试场景
- **商品数量**: 100万种商品
- **库存记录**: 1000万条记录
- **查询性能**: 复杂查询<5秒
- **报表生成**: 大报表<30秒

## 6. 安全用例测试

### UC013: 权限控制验证

#### 6.1.1 测试场景
验证不同角色用户只能访问被授权的功能。

#### 6.1.2 测试用例
```
权限测试场景：
1. 普通员工登录系统
2. 尝试访问管理员功能
3. 系统拒绝访问并提示权限不足
4. 记录未授权访问尝试
5. 通知系统管理员
```

### UC014: 数据安全验证

#### 6.2.1 测试场景
验证敏感数据的安全防护措施。

#### 6.2.2 测试用例
```
数据安全测试：
1. 检查密码是否加密存储
2. 验证SQL注入防护
3. 测试XSS攻击防护
4. 验证HTTPS数据传输
5. 检查敏感数据脱敏
```

## 7. 用例覆盖度分析

### 7.1 功能覆盖度
| 功能模块 | 用例数量 | 覆盖率 |
|---------|---------|--------|
| 用户管理 | 5个 | 100% |
| 商品管理 | 8个 | 95% |
| 库存管理 | 12个 | 98% |
| 入库管理 | 10个 | 100% |
| 出库管理 | 10个 | 100% |
| 盘点管理 | 6个 | 90% |
| 报表分析 | 8个 | 85% |
| 移动端 | 6个 | 90% |
| **总计** | **65个** | **95%** |

### 7.2 用例优先级分类
- **高优先级**: 核心业务用例（入库、出库、库存管理）
- **中优先级**: 基础管理用例（商品、用户、报表）
- **低优先级**: 辅助功能用例（系统配置、日志查看）

### 7.3 测试策略
1. **回归测试**: 核心用例每个版本都要测试
2. **冒烟测试**: 基本功能用例快速验证
3. **探索测试**: 边界条件和异常场景
4. **自动化测试**: 重复性高的用例自动执行

## 8. 用例维护规范

### 8.1 用例编写规范
- 用例编号统一格式：UC + 3位数字
- 用例名称简洁明确
- 前置条件和后置条件清晰
- 主流程步骤详细具体
- 异常流程考虑全面

### 8.2 用例更新管理
- 需求变更时及时更新用例
- 版本发布前全面评审用例
- 定期清理过时用例
- 保持用例与系统功能同步

### 8.3 用例评审要求
- 业务专家参与用例评审
- 开发团队确认技术可行性
- 测试团队验证用例完整性
- 所有相关方签字确认

---

*文档版本: 1.0*  
*创建日期: 2024年*  
*审核状态: 待审核*  
*维护人: GreaterWMS用例设计团队*
